generator client {
  provider      = "prisma-client-js"
  output        = "./prismaClient"
  binaryTargets = ["native", "linux-musl"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model user {
  guid_user String      @id @default(uuid())
  firstName String      @db.VarChar(75)
  lastName  String      @db.VarChar(75)
  email     String      @unique @db.VarChar(150)
  password  String      @db.VarChar(150)
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt
  employees employees[]
  tokens    tokens[]
  role      role[]
}

model tokens {
  guid_token String   @id @default(uuid())
  token      String   @unique
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  users_guid String
  user       user     @relation(fields: [users_guid], references: [guid_user])
}

model permission {
  guid_permission String            @id @default(uuid())
  permTitle       String            @unique @db.VarChar(75)
  createdAt       DateTime          @default(now())
  updatetAt       DateTime          @updatedAt
  role_permission role_permission[]
}

model role {
  guid_role       String            @id @default(uuid())
  roleTitle       String            @unique @db.VarChar(75)
  createdAt       DateTime          @default(now())
  updatedAt       DateTime          @updatedAt
  user_guid       String
  user            user              @relation(fields: [user_guid], references: [guid_user])
  role_permission role_permission[]
}

model role_permission {
  guid_role_perm  String     @id @default(uuid())
  permission_guid String
  role_guid       String
  createdAt       DateTime   @default(now())
  updatedAt       DateTime   @updatedAt
  permission      permission @relation(fields: [permission_guid], references: [guid_permission])
  role            role       @relation(fields: [role_guid], references: [guid_role])
}

model departments {
  guid_dept String     @id @default(uuid())
  deptName  String     @unique @db.VarChar(75)
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt
  dept_emp  dept_emp[]
}

model employees {
  guid_employee String     @id @default(uuid())
  firstName     String     @db.VarChar(75)
  lastName      String     @db.VarChar(75)
  birthDate     DateTime   @db.Date
  hire_date     DateTime   @db.Date
  wage          Decimal    @db.Money
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt
  user_guid     String
  dept_emp      dept_emp[]
  user          user       @relation(fields: [user_guid], references: [guid_user])
}

model dept_emp {
  guid_dept_emp String      @id @default(uuid())
  dept_guid     String
  emp_guid      String
  from_date     DateTime    @db.Date
  to_date       DateTime    @db.Date
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  departments   departments @relation(fields: [dept_guid], references: [guid_dept])
  employee      employees   @relation(fields: [emp_guid], references: [guid_employee])
}
